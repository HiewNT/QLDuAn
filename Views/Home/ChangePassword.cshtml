@{
    ViewData["Title"] = "Đổi mật khẩu";
}

<div class="container d-flex align-items-center justify-content-center" style="min-height: 80vh;">
    <div class="card shadow-sm p-4" style="min-width: 350px; max-width: 400px;">
        <h2 class="mb-4 text-center text-primary fw-bold">
            <i class="bi bi-key me-2"></i>Đổi mật khẩu
        </h2>
        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger">@ViewBag.Error</div>
        }
        @if (ViewBag.Success != null)
        {
            <div class="alert alert-success">@ViewBag.Success</div>
        }
        <form asp-action="ChangePassword" method="post" id="changePasswordForm">
            <div class="mb-3">
                <label for="currentPassword" class="form-label">Mật khẩu hiện tại</label>
                <input name="currentPassword" id="currentPassword" type="password" class="form-control" required />
            </div>
            <div class="mb-3">
                <label for="newPassword" class="form-label">Mật khẩu mới</label>
                <input name="newPassword" id="newPassword" type="password" class="form-control" required />
            </div>
            <div class="mb-3">
                <label for="confirmPassword" class="form-label">Nhập lại mật khẩu mới</label>
                <input name="confirmPassword" id="confirmPassword" type="password" class="form-control" required />
                <div class="invalid-feedback">
                    Mật khẩu nhập lại không khớp.
                </div>
            </div>
            <button type="submit" class="btn btn-primary w-100">
                <i class="bi bi-key me-1"></i>Đổi mật khẩu
            </button>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        document.getElementById('changePasswordForm').addEventListener('submit', function (e) {
            var newPassword = document.getElementById('newPassword').value;
            var confirmPassword = document.getElementById('confirmPassword').value;
            var confirmInput = document.getElementById('confirmPassword');
            if (newPassword !== confirmPassword) {
                confirmInput.classList.add('is-invalid');
                e.preventDefault();
            } else {
                confirmInput.classList.remove('is-invalid');
            }
        });
    </script>
}